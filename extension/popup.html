<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>VaultKeeper</title>
    <link rel="stylesheet" href="variables.css" />
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body>
    <div class="app">
      <div id="loading-view" class="view loading-view">
        <div class="spinner"></div>
        <p>Connecting...</p>
      </div>

      <div id="locked-view" class="view locked-view hidden">
        <div class="lock-container">
          <div class="lock-icon">üîê</div>
          <h2>VaultKeeper</h2>
          <p class="subtitle">Enter your master password</p>
          <div class="input-group">
            <input
              type="password"
              id="master-password"
              placeholder="Master Password"
              autofocus
            />
          </div>
          <button id="unlock-btn" class="btn-primary full-width">Unlock</button>
          <p id="error-message" class="error hidden"></p>
        </div>
      </div>

      <div id="disconnected-view" class="view disconnected-view hidden">
        <div class="disconnect-container">
          <div class="disconnect-icon">‚ö†Ô∏è</div>
          <h3>Connection Failed</h3>
          <p>Could not connect to VaultKeeper app</p>
          <button id="retry-btn" class="btn-secondary">Retry</button>
        </div>
      </div>

      <div id="setup-view" class="view setup-view hidden">
        <div class="setup-hero-icon">
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
            <path d="M12 8v4" />
            <path d="M12 16h.01" />
          </svg>
        </div>

        <h2 class="setup-title">Welcome to VaultKeeper</h2>
        <p class="setup-description">
          Your secure vault is almost ready. Follow these steps to complete the
          setup.
        </p>

        <div class="setup-steps">
          <div class="setup-step">
            <div class="step-number">1</div>
            <div class="step-text">
              Open the <strong>VaultKeeper Desktop App</strong>
            </div>
          </div>
          <div class="setup-step">
            <div class="step-number">2</div>
            <div class="step-text">
              Create your <strong>Master Password</strong>
            </div>
          </div>
          <div class="setup-step">
            <div class="step-number">3</div>
            <div class="step-text">
              Return here to start using the extension
            </div>
          </div>
        </div>

        <div class="status-indicator">
          <div class="status-dot"></div>
          <span class="status-text">Waiting for setup...</span>
        </div>
      </div>

      <div id="unlocked-view" class="view unlocked-view hidden">
        <header class="top-bar">
          <div class="search-container">
            <svg
              class="search-icon"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="11" cy="11" r="8"></circle>
              <path d="m21 21-4.35-4.35"></path>
            </svg>
            <input
              type="text"
              id="search-input"
              placeholder="Search VaultKeeper"
            />
          </div>
          <div class="top-actions">
            <button id="lock-btn" class="icon-btn" title="Lock">
              <svg
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path
                  d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"
                />
              </svg>
            </button>
            <button id="add-btn" class="btn-primary-small">
              <svg
                width="14"
                height="14"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="3"
              >
                <path d="M12 5v14M5 12h14" />
              </svg>
              New Item
            </button>
          </div>
        </header>

        <div class="split-view">
          <aside class="sidebar">
            <div class="sidebar-header">
              <span class="section-title">All Items</span>
              <span id="credential-count" class="badge">0</span>
            </div>
            <div id="credentials-list" class="credentials-list">

            </div>
          </aside>

          <main class="detail-panel">
            <div id="empty-state" class="empty-detail">
              <div class="empty-icon">üîê</div>
              <p>Select an item to view details</p>
            </div>

            <div id="detail-content" class="detail-content hidden">
              <div class="detail-header">
                <div class="detail-header-row">
                  <span class="breadcrumb">Private</span>
                  <div class="detail-actions">
                    <button id="fill-btn" class="btn-outline">
                      Open & Fill
                    </button>
                    <button id="menu-btn" class="icon-btn-small">‚ãÆ</button>
                  </div>
                </div>
                <div class="detail-title-row">
                  <div id="detail-favicon" class="detail-favicon">üåê</div>
                  <div class="detail-title-info">
                    <h2 id="detail-title">Title</h2>
                  </div>
                </div>
              </div>

              <div class="detail-fields">
                <div class="field-group">
                  <label>username</label>
                  <div class="field-value">
                    <span id="detail-username">username@example.com</span>
                    <button class="copy-btn" data-copy="username" title="Copy">
                      <svg
                        width="16"
                        height="16"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                      >
                        <rect x="9" y="9" width="13" height="13" rx="2"></rect>
                        <path
                          d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"
                        ></path>
                      </svg>
                    </button>
                  </div>
                </div>

                <div class="field-group">
                  <label>password</label>
                  <div class="field-value">
                    <span id="detail-password" class="password-masked"
                      >‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢</span
                    >
                    <div class="password-actions">
                      <span class="strength-badge good">Fantastic</span>
                      <button
                        id="toggle-password"
                        class="icon-btn-tiny"
                        title="Show"
                      >
                        <svg
                          width="16"
                          height="16"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2"
                        >
                          <path
                            d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"
                          ></path>
                          <circle cx="12" cy="12" r="3"></circle>
                        </svg>
                      </button>
                      <button
                        class="copy-btn"
                        data-copy="password"
                        title="Copy"
                      >
                        <svg
                          width="16"
                          height="16"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2"
                        >
                          <rect
                            x="9"
                            y="9"
                            width="13"
                            height="13"
                            rx="2"
                          ></rect>
                          <path
                            d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"
                          ></path>
                        </svg>
                      </button>
                    </div>
                  </div>
                </div>

                <div class="field-group">
                  <label>website</label>
                  <div class="field-value">
                    <a id="detail-url" href="#" target="_blank" class="url-link"
                      >https://example.com</a
                    >
                    <button class="copy-btn" data-copy="url" title="Copy">
                      <svg
                        width="16"
                        height="16"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                      >
                        <rect x="9" y="9" width="13" height="13" rx="2"></rect>
                        <path
                          d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"
                        ></path>
                      </svg>
                    </button>
                  </div>
                </div>

                <div id="totp-field-group" class="field-group hidden">
                  <label>two-factor code</label>
                  <div class="field-value totp-value">
                    <span id="detail-totp-code" class="totp-code">--- ---</span>
                    <div class="totp-timer">
                      <span id="detail-totp-countdown" class="totp-countdown"
                        >30s</span
                      >
                      <svg
                        id="totp-progress"
                        class="totp-progress-ring"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                      >
                        <circle
                          class="totp-progress-bg"
                          cx="12"
                          cy="12"
                          r="10"
                          fill="none"
                          stroke-width="2"
                        />
                        <circle
                          id="totp-progress-circle"
                          class="totp-progress-circle"
                          cx="12"
                          cy="12"
                          r="10"
                          fill="none"
                          stroke-width="2"
                          stroke-linecap="round"
                        />
                      </svg>
                    </div>
                    <button class="copy-btn" data-copy="totp" title="Copy TOTP">
                      <svg
                        width="16"
                        height="16"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                      >
                        <rect x="9" y="9" width="13" height="13" rx="2"></rect>
                        <path
                          d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"
                        ></path>
                      </svg>
                    </button>
                  </div>
                </div>

                <div id="backup-field-group" class="field-group hidden">
                  <label>backup 2fa code</label>
                  <div class="field-value">
                    <span id="detail-backup-codes" class="backup-codes-masked"
                      >‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢</span
                    >
                    <button
                      id="toggle-backup"
                      class="icon-btn-tiny"
                      title="Show/Hide"
                    >
                      <svg
                        width="16"
                        height="16"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                      >
                        <path
                          d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"
                        ></path>
                        <circle cx="12" cy="12" r="3"></circle>
                      </svg>
                    </button>
                    <button
                      class="copy-btn"
                      data-copy="backup"
                      title="Copy Backup Codes"
                    >
                      <svg
                        width="16"
                        height="16"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                      >
                        <rect x="9" y="9" width="13" height="13" rx="2"></rect>
                        <path
                          d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"
                        ></path>
                      </svg>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </main>
        </div>
      </div>

      <div id="modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
          <div class="modal-header">
            <h3 id="modal-title">New Item</h3>
            <button id="modal-close" class="modal-close">&times;</button>
          </div>
          <form id="credential-form">
            <div class="form-group">
              <label>Website</label>
              <input
                type="text"
                id="cred-domain"
                placeholder="example.com"
                required
              />
            </div>
            <div class="form-group">
              <label>Username</label>
              <input
                type="text"
                id="cred-username"
                placeholder="user@email.com"
                required
              />
            </div>
            <div class="form-group">
              <label>Password</label>
              <div class="input-with-actions">
                <input type="password" id="cred-password" required />
                <button
                  type="button"
                  id="generate-btn"
                  class="icon-btn-small"
                  title="Generate"
                >
                  üé≤
                </button>
                <button
                  type="button"
                  id="toggle-btn"
                  class="icon-btn-small"
                  title="Show"
                >
                  üëÅ
                </button>
              </div>
            </div>
            <div class="form-group">
              <label>Notes (optional)</label>
              <textarea id="cred-notes" rows="2"></textarea>
            </div>
            <div class="modal-actions">
              <button type="button" id="cancel-btn" class="btn-ghost">
                Cancel
              </button>
              <button type="submit" class="btn-primary">Save</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <script src="password_strength.js"></script>
    <script src="popup.js"></script>
  </body>
</html>